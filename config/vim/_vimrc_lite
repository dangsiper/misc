if has('win32')
    let Tlist_Ctags_Cmd="E:/bin/ctags.exe"
    let $PATH="E:/bin/msys2/usr/bin;".$PATH
endif
set shiftwidth=2
set ts=2
set expandtab
set hlsearch
set ignorecase
set smartcase
set incsearch
set noswapfile
set backspace=indent,eol,start
set udf
set udir=~/.tmp
set nobk
set ar
set autoindent
set smartindent
set showcmd
set laststatus=2
syntax on
set path+=**
let GtagsCscope_Auto_Map=1
set cscopetag
let Tlist_Show_One_File=1
let Tlist_Exit_OnlyWindow=1
set updatetime=500
nmap <C-H> :ls<CR>:b
nmap <F5> :GtagsCscope<CR>
nmap <C-L> :TlistToggle<CR>
au BufRead * if line("'\"") > 1 && line("'\"") <= line("$") | exe "normal! g'\"" | endif
if has("gui_running")
    set cursorline
    if has('unix')
        set guifont=DejaVu\ Sans\ Mono\ 14
    else
        set guifont=DejaVu_Sans_Mono:h14
    endif
    set linespace=2
    let chp=expand('%.h')
    if chp > 0
        cd chp
    endif
else
    set nocursorline
endif
function! Find(...)
  let path="."
  if a:0==2
    let path=a:2
  endif
  let l:list=system("find ".path." -iname '".a:1."'")
  let l:num=strlen(substitute(l:list, "[^\n]", "", "g"))
  if l:num < 1
    echo "'".a:1."' not found"
    return
  elseif l:num == 1
    exe "open " . substitute(l:list, "\n", "", "g")
  else
    let tmpfile=tempname()
    exe "redir! > " . tmpfile
    silent echon l:list
    redir END
    let old_efm=&efm
    set efm=%f
    if exists(":cgetfile")
        execute "silent! cgetfile " . tmpfile
    else
        execute "silent! cfile " . tmpfile
    endif
    let &efm=old_efm
    botright copen
    call delete(tmpfile)
  endif
endfunction
command! -nargs=* F :call Find(<f-args>)
function! MRU()
    let tmpfile = tempname()
    exe "redir! > " . tmpfile
    silent oldfiles
    redir END
    let old_efm = &efm
    set efm=%*[0-9]:\ %f
    if exists(":cgetfile")
        execute "silent! cgetfile " . tmpfile
    else
        execute "silent! cfile " . tmpfile
    endif
    let &efm = old_efm
    botright copen
    call delete(tmpfile)
endfunction
command! -nargs=0 H :call MRU()
